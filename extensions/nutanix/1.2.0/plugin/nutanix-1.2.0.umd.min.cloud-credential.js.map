{"version":3,"file":"nutanix-1.2.0.umd.min.cloud-credential.js","mappings":"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","sources":["webpack://nutanix-1.2.0/./nutanix.ts","webpack://nutanix-1.2.0/./cloud-credential/nutanix.vue?3cc1","webpack://nutanix-1.2.0/./cloud-credential/nutanix.vue?9024","webpack://nutanix-1.2.0/./cloud-credential/nutanix.vue","webpack://nutanix-1.2.0/../../node_modules/@rancher/shell/utils/url.ts","webpack://nutanix-1.2.0/./cloud-credential/nutanix.vue?beab"],"sourcesContent":["import { isArray } from \"lodash\";\n\nexport const NTNX_API_KEY_HEADER = 'X-ntnx-api-key';\n\ntype Options = {\n  value: any;\n  api: string;\n  field: string;\n  mapper?: Function;\n  filter?: Function;\n  initial?: string;\n  name?: string;\n}\n/**\n * Helper class for dealing with the nutanix API\n */\nexport class Nutanix {\n  public endpoint: string = '';\n  public username: string = '';\n  public password: string = '';\n  public port: string = '';\n  public insecure: boolean = false;\n  public clusterReferenceId: string = '';\n  private credentialID: string = '';\n  private endpoints: any;\n\n  private $dispatch: any;\n\n  constructor($store: any, obj: any) {\n    if (obj.nutanixcredentialConfig) {\n      Object.keys(obj.nutanixcredentialConfig).forEach((key) => {\n        (this as any)[key] = obj.nutanixcredentialConfig[key];\n      });\n      this.credentialID = obj.id;\n    } else {\n      // Copy from options to this\n      Object.keys(obj).forEach((key) => {\n        (this as any)[key] = obj[key];\n      });\n    }\n\n    this.$dispatch = $store.dispatch;\n  }\n\n  public async testConnection() {\n    const baseUrl = `/meta/proxy/${this.endpoint}:${this.port}`;\n    const url = `${baseUrl}/api/clustermgmt/v4.1/config/clusters`;\n    const headers: any = {\n      Accept: 'application/json'\n    };\n\n    if (this.username === NTNX_API_KEY_HEADER) {\n      headers[NTNX_API_KEY_HEADER] = this.password;\n    } else {\n      headers['X-API-Auth-Header'] = 'Basic ' + btoa(this.username + ':' + this.password);\n    }\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: 'GET',\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      if (res._status === 502) {\n        return { error: 'Could not proxy request - URL may not be in Rancher\\'s allow list' };\n      }\n\n      return res;\n\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n      return { error: e };\n    }\n  }\n\n  public async getClusterList(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: \"/api/clustermgmt/v4.1/config/clusters\",\n      field: 'data',\n      filter: (cluster: any) => cluster.config.hypervisorTypes.includes(\"AHV\"),\n      initial\n    });\n  }\n\n  public async getImages(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/vmm/v4.1/content/images',\n      field: 'data',\n      initial\n    });\n  }\n\n  public async getNetwork(value: any, initial?: string) {\n    // Fetch all VPCs once and build a lookup table\n    const vpcMap = await this.buildVpcMap();\n\n    return await this.getOptions({\n      value,\n      api: '/api/networking/v4.1/config/subnets',\n      field: 'data',\n      mapper: async (network: any) => {\n        const vpc = network.subnetType === \"OVERLAY\" ? vpcMap.get(network.vpcReference) : undefined;\n        return {\n          ...network,\n          baseName: network.name,\n          name: network.subnetType === \"OVERLAY\" ? `${network.name} (${vpc?.name || 'Unknown VPC'})` : network.name,\n        }\n      },\n      filter: (network: any) =>\n        (network.subnetType == \"OVERLAY\" ||\n          network.clusterReference == this.clusterReferenceId ||\n          network?.clusterReferenceList.includes(this.clusterReferenceId)) && !network.isExternal,\n      initial\n    });\n  }\n\n  private async buildVpcMap(): Promise<Map<string, any>> {\n    const vpcMap = new Map<string, any>();\n    const vpcOptions: any = {\n      busy: false,\n      enabled: false,\n      selected: '',\n      options: []\n    };\n\n    try {\n      await this.getOptions({\n        value: vpcOptions,\n        api: '/api/networking/v4.1/config/vpcs',\n        field: 'data'\n      });\n\n      vpcOptions.options.forEach((option: any) => {\n        const vpc = option?.value;\n\n        if (vpc?.extId) {\n          vpcMap.set(vpc.extId, vpc);\n        }\n      });\n    } catch (e) {\n      console.error('Error fetching VPCs:', e); // eslint-disable-line no-console\n    }\n\n    return vpcMap;\n  }\n\n  public async getStorageContainer(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/clustermgmt/v4.1/config/storage-containers',\n      field: 'data',\n      filter: (storage: any) => storage.clusterExtId === this.clusterReferenceId,\n      initial\n    });\n  }\n\n  public async getCategories(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/prism/v4.1/config/categories',\n      field: 'data',\n      mapper: (categorie: any) => { return { ...categorie, name: `${categorie.key}=${categorie.value}` } },\n      filter: (categorie: any) => categorie.key !== \"Project\",\n      initial\n    });\n  }\n\n  public async getProjectsName(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/nutanix/v3/projects/list',\n      field: 'entities',\n      mapper: (project: any) => { return { ...project, name: `${project.spec.name}` } },\n      initial\n    });\n  }\n\n  // public async getNetworkNames(value: any, initial?: string) {\n  //   return await this.getOptions(value, '/os-tenant-networks', 'networks', (network: any) => {\n  //     return {\n  //       ...network,\n  //       name: network.label\n  //     };\n  //   }, initial);\n  // }\n\n  private async constructTotalResponse(apiPath: string, initialDataLength: number, total: number) {\n    const pageCount = Math.ceil(total / initialDataLength);\n    const data = [];\n    for (let i = 1; i < pageCount; i++) {\n      const nextPageResponse = await this.makeComputeRequest(this.withPage(apiPath, i));\n      data.push(...nextPageResponse.data);\n    }\n\n    return data;\n  }\n\n  private async constructProjectTotalResponse(apiPath: string, initialDataLength: number, total: number) {\n    const pageCount = Math.ceil(total / initialDataLength);\n    const entities = [];\n    for (let i = 1; i < pageCount; i++) {\n      const nextPageResponse = await this.makeComputeRequest(this.withPage(apiPath, i), 'POST');\n      entities.push(...nextPageResponse.entities);\n    }\n\n    return entities;\n  }\n\n  public async getOptions(options: Options) {\n    const { value, api, mapper, filter, initial, field } = options;\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = isArray(value.selected) ? [] : '';\n\n    let res;\n\n    if (api === '/api/nutanix/v3/projects/list') {\n      res = await this.makeComputeRequest(this.withPage(api, 0), 'POST');\n      const total = res?.metadata?.total_matches ?? 0;\n      const pageCount = res?.entities?.length ?? 0;\n      if (pageCount < total) {\n        const entities = await this.constructProjectTotalResponse(api, pageCount, total);\n        res.entities = [...res.entities, ...entities];\n      }\n    }\n    else {\n      res = await this.makeComputeRequest(this.withPage(api, 0));\n      const total = res?.metadata?.totalAvailableResults ?? 0;\n      const pageCount = res?.data?.length ?? 0;\n\n      if (pageCount < total) {\n        const data = await this.constructTotalResponse(api, pageCount, total);\n        res.data = [...res.data, ...data];\n      }\n    }\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (filter) {\n        list = list.filter((k: any) => filter(k));\n      }\n\n      if (mapper) {\n        list = await Promise.all(list.map(async (k: any) => await mapper(k)));\n      }\n\n      value.options.forEach((selected: any) => { list.push(selected) });\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (value.options.length < list.length) {\n        const seenExtIds = new Set();\n        const unique = list.filter((obj: any) => {\n          if (!obj?.extId) {\n            return false;\n          }\n\n          if (seenExtIds.has(obj.extId)) {\n            return true;\n          }\n\n          seenExtIds.add(obj.extId);\n\n          return false;\n        });\n        value.duplicates = unique;\n      }\n\n      if (initial) {\n        const found = value.options.find((option: any) => option.value.name === initial);\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n    } else {\n      value.options = [];\n      value.selected = isArray(value.selected) ? [] : null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async makeComputeRequest(api: string, method: string = 'GET') {\n    const baseUrl = `/meta/proxy/${this.endpoint}:${this.port}`;\n    const url = `${baseUrl}${api}`;\n\n    const headers: any = {\n      Accept: 'application/json',\n      \"Content-Type\": 'application/json'\n    };\n\n    if (this.username === NTNX_API_KEY_HEADER) {\n      headers[NTNX_API_KEY_HEADER] = this.password;\n    } else {\n      headers['X-API-Auth-Header'] = 'Basic ' + btoa(this.username + ':' + this.password);\n    }\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: method,\n        data: JSON.stringify({}),\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      return res;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n    }\n  }\n\n\n  private convertToOptions(list: any) {\n    const seenExtIds = new Set();\n    const unique = list.filter((obj: any) => {\n      if (!obj?.extId) {\n        return true;\n      }\n\n      if (seenExtIds.has(obj.extId)) {\n        return false;\n      }\n\n      seenExtIds.add(obj.extId);\n\n      return true;\n    });\n\n    const sorted = (unique || []).sort((a: any, b: any) => {\n      const nameA = a?.name ?? '';\n      const nameB = b?.name ?? '';\n      return nameA.localeCompare(nameB);\n    });\n    const nameCounts = sorted.reduce((counts: Map<string, number>, item: any) => {\n      const key = item?.name;\n\n      if (key) {\n        counts.set(key, (counts.get(key) || 0) + 1);\n      }\n\n      return counts;\n    }, new Map<string, number>());\n\n    return sorted.map((p: any) => {\n      const hasDuplicateName = !!p?.name && (nameCounts.get(p.name) || 0) > 1;\n\n      return {\n        label: hasDuplicateName && p?.extId ? `${p.name} (${p.extId})` : p.name,\n        value: p\n      };\n    });\n  }\n\n  private withPage(apiPath: string, page: number): string {\n    const separator = apiPath.includes('?') ? '&' : '?';\n\n    return `${apiPath}${separator}$page=${page}`;\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".allow-list-error[data-v-61db86b2]{display:flex}.allow-list-error[data-v-61db86b2]>:first-child{flex:1}.icon-spacer[data-v-61db86b2]{width:24px}.align-start[data-v-61db86b2]{align-self:flex-start}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./nutanix.vue?vue&type=style&index=0&id=61db86b2&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"63d11ad0\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport { parse as parseUrl } from '@shell/utils/url';\nimport { _CREATE } from '@shell/config/query-params';\nimport { _VIEW } from '@shell/config/query-params';\n\nimport { Nutanix, NTNX_API_KEY_HEADER } from '../nutanix.ts';\n\nimport Banner from '@components/Banner/Banner.vue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Checkbox from '@shell/rancher-components/Form/Checkbox/Checkbox.vue';\n\nexport default {\n  components: {\n    Banner,\n    LabeledInput,\n    LabeledSelect,\n    Checkbox,\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    this.driver = await this.$store.dispatch('rancher/find', {\n      type: 'nodedriver',\n      id:   'nutanix'\n    });\n  },\n\n  mounted() {\n    // Detect auth type from existing credentials\n    if (this.value?.decodedData?.username === NTNX_API_KEY_HEADER) {\n      this.authType = 'apiKey';\n    } else if (this.value?.decodedData?.username) {\n      this.authType = 'password';\n    }\n  },\n\n  data() {\n    return {\n      step:           1,\n      busy:           false,\n      errorAllowHost: false,\n      allowBusy:      false,\n      driver:         {},\n      error:          '',\n      success:        '',\n      authType:       '',\n    };\n  },\n\n  computed: {\n    authTypeOptions() {\n      return [\n        { label: this.t('driver.nutanix.auth.authTypes.password'), value: 'password' },\n        { label: this.t('driver.nutanix.auth.authTypes.apiKey'), value: 'apiKey' },\n      ];\n    },\n\n    hostname() {\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      return u?.host || '';\n    },\n\n    // Function used to verified if we can clic on the Authenticate button\n    canAuthenticate() {\n      if (!this.authType) {\n        return false;\n      }\n      if (this.authType === 'apiKey') {\n        return !!this.value?.decodedData?.endpoint &&\n          !!this.value?.decodedData?.password;\n      }\n      return !!this.value?.decodedData?.endpoint &&\n        !!this.value?.decodedData?.username &&\n        !!this.value?.decodedData?.password;\n    }\n  },\n  emits: ['validationChanged'],\n\n  watch: {\n    authType(newVal) {\n      // Reset test status when auth type changes\n      this.error = '';\n      this.success = '';\n      this.errorAllowHost = false;\n      this.$emit('validationChanged', false);\n      \n      if (newVal === 'apiKey') {\n        this.value.setData('username', NTNX_API_KEY_HEADER);\n        this.value.setData('password', '');\n      } else if (newVal === 'password') {\n        // Clear username when switching back to password mode\n        if (this.value.decodedData.username === NTNX_API_KEY_HEADER) {\n          this.value.setData('username', '');\n          this.value.setData('password', '');\n        }\n      }\n    }\n  },\n\n  methods: {\n\n    test() {\n      return true;\n    },\n\n    hostInAllowList() {\n      if (!this.driver?.whitelistDomains) {\n        return false;\n      }\n\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      if (!u.host) {\n        return true;\n      }\n\n      return (this.driver?.whitelistDomains || []).includes(u.host);\n    },\n\n    async addHostToAllowList() {\n      this['allowBusy'] = true;\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      this.driver.whitelistDomains = this.driver.whitelistDomains || [];\n\n      if (!this.hostInAllowList()) {\n        this.driver.whitelistDomains.push(u.host);\n      }\n\n      try {\n        await this.driver.save();\n\n        // this.$refs.connect.$el.click();\n\n        this['error'] = \"\";\n        this.connect();\n\n\n      } catch (e) {\n        console.error('Could not update driver', e); // eslint-disable-line no-console\n        this['allowBusy'] = false;\n      }\n\n    },\n\n    async connect() {\n      if (this.disabled) {\n        return;\n      }\n\n      this['error'] = '';\n      this['success'] = '';\n      this['errorAllowHost'] = false;\n\n      let okay = false;\n\n      if (!this.value.decodedData.endpoint) {\n        this['busy'] = false;\n        return;\n      }\n\n      if (!this.value.decodedData.port)\n        this.value.setData('port', 9440);\n\n      const os = new Nutanix(this.$store, {\n        endpoint:   this.value.decodedData.endpoint,\n        username:   this.value.decodedData.username,\n        password:   this.value.decodedData.password,\n        port:       this.value.decodedData.port,\n        insecure:   this.value.decodedData.insecure,\n      });\n\n      this['allowBusy'] = false;\n      this['busy'] = true;\n\n      const res = await os.testConnection();\n\n      if (res.error) {\n        okay = false;\n\n\n        if (res.error._status === 502 && !this.hostInAllowList()) {\n          this['errorAllowHost'] = true;\n        } else if (res.error._status === 401) {\n          this['error'] = \"Authentication Failed\";\n        } else if (res.error._status === 403) {\n          this['error'] = \"Permission Denied\";\n        } else if (res.error._status === 404) {\n          this['error'] = \"API method not found. PC version 2024.3 or higher is required\";\n        } else {\n          this['error'] = res.error.message ? res.error.message : \"Something went wrong\";\n        }\n      } else {\n        okay = true;\n        this['success'] = `Connection to ${this.value.decodedData.endpoint} successful`;\n      }\n\n      this['busy'] = false;\n      this.$emit('validationChanged', okay);\n    }\n  }\n};\n</script>\n\n<template>\n    <div class=\"row\">\n      <div class=\"col span-6\"> <!-- Endpoint -->\n        <LabeledInput\n          :value=\"value.decodedData.endpoint\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.nutanix.auth.fields.endpoint\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.endpoint\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('endpoint', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\"> <!-- Port -->\n        <LabeledInput\n          :value=\"value.decodedData.port\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.nutanix.auth.fields.port\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.port\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('port', $event);\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row mt-20\">\n      <div class=\"col span-12\">\n        <LabeledSelect\n          :value=\"authType\"\n          :options=\"authTypeOptions\"\n          label-key=\"driver.nutanix.auth.fields.authType\"\n          :mode=\"mode\"\n          :disabled=\"step !== 1\"\n          @update:value=\"authType = $event\"\n        />\n      </div>\n    </div>\n\n    <!-- Password Authentication -->\n    <div v-if=\"authType === 'password'\" class=\"row\">\n      <div class=\"col span-6\"> <!-- Username -->\n        <LabeledInput\n          :value=\"value.decodedData.username\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.nutanix.auth.fields.username\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.username\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('username', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\"> <!-- Password -->\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.nutanix.auth.fields.password\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.password\"\n          type=\"password\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n\n    <!-- API Key Authentication -->\n    <div v-if=\"authType === 'apiKey'\" class=\"row\">\n      <div class=\"col span-12\"> <!-- API Key -->\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.nutanix.auth.fields.apiKey\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.apiKey\"\n          type=\"password\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <Checkbox\n          class=\"mt-20\"\n          :value=\"value.decodedData.insecure\"\n          :valueWhenTrue=\"true\"\n          label-key=\"driver.nutanix.auth.fields.insecure\"\n          @update:value=\"value.setData('insecure', $event);\"\n          :disabled=\"true\"\n        />\n      </div>\n    </div>\n\n    <!-- Test Authentication -->\n    <button\n      ref=\"connect\"\n      class=\"btn role-primary mt-20 align-start\"\n      :disabled=\"step !== 1 || !canAuthenticate\"\n      :loading=\"step !== 1 || !canAuthenticate\"\n      @click=\"connect($event)\"\n    >\n      <i\n        v-if=\"busy\"\n        class=\"icon icon-lg icon-spinner icon-spin\"\n      />\n      <span\n        v-else\n        class=\"icon-spacer\"\n      />\n      <span>{{ t('driver.nutanix.auth.actions.authenticate') }}</span>\n      <span class=\"icon-spacer\" />\n    </button>\n\n    <Banner v-if=\"success\"\n      color=\"success\"\n      :closable=\"false\"\n    >\n      {{ success }}\n    </Banner>\n\n    <Banner\n      v-if=\"error\"\n      class=\"mt-20\"\n      color=\"error\"\n    >\n      {{ error }}\n    </Banner>\n\n    <Banner\n      v-if=\"errorAllowHost\"\n      color=\"error\"\n      class=\"allow-list-error\"\n    >\n      <div>\n        {{ t('driver.nutanix.auth.errors.notAllowed', { hostname }) }}\n      </div>\n      <button\n        :disabled=\"allowBusy\"\n        class=\"btn ml-10 role-primary\"\n        @click=\"addHostToAllowList\"\n      >\n        {{ t('driver.nutanix.auth.actions.addToAllowList') }}\n      </button>\n    </Banner>\n</template>\n<style lang=\"scss\" scoped>\n  .allow-list-error {\n    display: flex;\n\n    > :first-child {\n      flex: 1;\n    }\n  }\n  .icon-spacer {\n    width: 24px;\n  }\n\n  .align-start {\n    align-self: flex-start;\n  }\n</style>\n","type UriField = 'source' | 'protocol' | 'authority' | 'userInfo' | 'user' | 'password' | 'host' | 'port' | 'relative' | 'path' | 'directory' | 'file' | 'queryStr' | 'anchor'\ntype UriFields = {\n  [key in UriField]: string; // eslint-disable-line no-unused-vars\n}\nexport type QueryParams = {\n  [key: string]: string\n}\n\ninterface ParsedUri extends UriFields {\n  query: QueryParams;\n}\n\nexport function addParam(url: string, key: string, val: string | string[]): string {\n  let out = url + (url.includes('?') ? '&' : '?');\n\n  // val can be a string or an array of strings\n  if ( !Array.isArray(val) ) {\n    val = [val];\n  }\n  out += val.map((v) => {\n    if ( v === null ) {\n      return `${ encodeURIComponent(key) }`;\n    } else {\n      return `${ encodeURIComponent(key) }=${ encodeURIComponent(v) }`;\n    }\n  }).join('&');\n\n  return out;\n}\n\nexport function addParams(url: string, params: QueryParams): string {\n  if ( params && typeof params === 'object' ) {\n    Object.keys(params).forEach((key) => {\n      url = addParam(url, key, params[key]);\n    });\n  }\n\n  return url;\n}\n\nexport function removeParam(url: string, key: string): string {\n  const parsed = parse(url);\n\n  if ( parsed.query?.[key] ) {\n    delete parsed.query[key];\n  }\n\n  return stringify(parsed);\n}\n\nexport function parseLinkHeader(str: string): Record<string, string> {\n  const out: { [key: string]: string} = { };\n  const lines = (str || '').split(',');\n\n  for ( const line of lines ) {\n    const match = line.match(/^\\s*<([^>]+)>\\s*;\\s*rel\\s*=\"(.*)\"/);\n\n    if ( match ) {\n      out[match[2].toLowerCase()] = match[1];\n    }\n  }\n\n  return out;\n}\n\nexport function isMaybeSecure(port: number, proto: string): boolean {\n  const protocol = proto.toLowerCase();\n\n  return portMatch([port], [443, 8443], ['443']) || protocol === 'https';\n}\n\nexport function portMatch(ports: number[], equals: number[], endsWith: string[]): boolean {\n  for (let i = 0; i < ports.length; i++) {\n    const port = ports[i];\n\n    if (equals.includes(port)) {\n      return true;\n    }\n\n    for (let j = 0; j < endsWith.length; j++) {\n      const suffix = `${ endsWith[j] }`;\n      const portStr = `${ port }`;\n\n      if (portStr !== suffix && portStr.endsWith(suffix)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// https://javascriptsource.com/parseuri/\n// MIT License\nexport function parse(str: string): ParsedUri {\n  const o = parse.options;\n  const m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str);\n\n  if (!m) {\n    throw new Error(`Cannot parse as uri: ${ str }`);\n  }\n  const uri = {} as ParsedUri;\n  let i = 14;\n\n  while (i--) {\n    uri[o.key[i]] = m[i] || '';\n  }\n\n  uri.query = {};\n  uri.queryStr.replace(o.q.parser, (_, $1: string, $2: string): string => {\n    if ($1) {\n      uri[o.q.name][$1] = $2;\n    }\n\n    return '';\n  });\n\n  return uri;\n}\n\nparse.options = {\n  strictMode: false,\n  key:        ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'queryStr', 'anchor'],\n  q:          {\n    name:   'query',\n    parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n  },\n  parser: {\n    strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n    loose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  }\n} as {\n  strictMode: boolean,\n  key: UriField[],\n  q: {\n    name: 'query',\n    parser: RegExp\n  },\n  parser: {\n    strict: RegExp,\n    loose: RegExp\n  }\n};\n\nexport function stringify(uri: ParsedUri): string {\n  let out = `${ uri.protocol }://`;\n\n  if ( uri.user && uri.password ) {\n    out += `${ uri.user }:${ uri.password }@`;\n  } else if ( uri.user ) {\n    out += `${ uri.user }@`;\n  }\n\n  out += uri.host;\n\n  if ( uri.port ) {\n    out += `:${ uri.port }`;\n  }\n\n  out += uri.path || '/';\n\n  out = addParams(out, uri.query || {});\n\n  if ( uri.anchor ) {\n    out += `#${ uri.anchor }`;\n  }\n\n  return out;\n}\n","import { render } from \"./nutanix.vue?vue&type=template&id=61db86b2&scoped=true\"\nimport script from \"./nutanix.vue?vue&type=script&lang=js\"\nexport * from \"./nutanix.vue?vue&type=script&lang=js\"\n\nimport \"./nutanix.vue?vue&type=style&index=0&id=61db86b2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61db86b2\"]])\n\nexport default __exports__"],"names":["NTNX_API_KEY_HEADER","Nutanix","constructor","$store","obj","_defineProperty","nutanixcredentialConfig","Object","keys","forEach","key","this","credentialID","id","$dispatch","dispatch","testConnection","baseUrl","endpoint","port","url","headers","Accept","username","password","btoa","res","method","redirectUnauthorized","root","_status","error","e","console","getClusterList","value","initial","getOptions","api","field","filter","cluster","config","hypervisorTypes","includes","getImages","getNetwork","vpcMap","buildVpcMap","mapper","async","vpc","network","subnetType","get","vpcReference","undefined","baseName","name","clusterReference","clusterReferenceId","clusterReferenceList","isExternal","Map","vpcOptions","busy","enabled","selected","options","option","extId","set","getStorageContainer","storage","clusterExtId","getCategories","categorie","getProjectsName","project","spec","constructTotalResponse","apiPath","initialDataLength","total","pageCount","Math","ceil","data","i","nextPageResponse","makeComputeRequest","withPage","push","constructProjectTotalResponse","entities","isArray","metadata","total_matches","length","totalAvailableResults","list","k","Promise","all","map","convertToOptions","seenExtIds","Set","unique","has","add","duplicates","found","find","JSON","stringify","sorted","sort","a","b","nameA","nameB","localeCompare","nameCounts","reduce","counts","item","p","hasDuplicateName","label","page","separator","___CSS_LOADER_EXPORT___","module","content","__esModule","default","locals","exports","class","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledInput","$props","decodedData","disabled","$data","step","type","mode","_cache","$event","setData","_hoisted_3","_hoisted_4","_hoisted_5","_component_LabeledSelect","authType","$options","authTypeOptions","_createElementBlock","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_component_Checkbox","insecure","valueWhenTrue","ref","canAuthenticate","loading","onClick","connect","_hoisted_14","_hoisted_15","_toDisplayString","_ctx","t","success","_createBlock","_component_Banner","color","closable","errorAllowHost","hostname","allowBusy","args","addHostToAllowList","_hoisted_16","parse","str","o","m","parser","strictMode","exec","Error","uri","query","queryStr","replace","q","_","$1","$2","strict","loose","components","Banner","LabeledInput","LabeledSelect","Checkbox","props","String","required","fetch","driver","mounted","computed","u","parseUrl","host","emits","watch","newVal","$emit","methods","test","hostInAllowList","whitelistDomains","save","okay","os","message","__exports__","render"],"sourceRoot":""}