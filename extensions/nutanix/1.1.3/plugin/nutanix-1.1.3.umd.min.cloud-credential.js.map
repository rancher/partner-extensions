{"version":3,"file":"nutanix-1.1.3.umd.min.cloud-credential.js","mappings":"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","sources":["webpack://nutanix-1.1.3/./nutanix.ts","webpack://nutanix-1.1.3/./cloud-credential/nutanix.vue?3cc1","webpack://nutanix-1.1.3/./cloud-credential/nutanix.vue?9024","webpack://nutanix-1.1.3/./cloud-credential/nutanix.vue","webpack://nutanix-1.1.3/../../node_modules/@rancher/shell/utils/url.ts","webpack://nutanix-1.1.3/./cloud-credential/nutanix.vue?beab"],"sourcesContent":["import { isArray } from \"lodash\";\n\nexport const NTNX_API_KEY_HEADER = 'X-ntnx-api-key';\n\ntype Options = {\n  value: any;\n  api: string;\n  field: string;\n  mapper?: Function;\n  filter?: Function;\n  initial?: string;\n  name?: string;\n}\n/**\n * Helper class for dealing with the nutanix API\n */\nexport class Nutanix {\n  public endpoint: string = '';\n  public username: string = '';\n  public password: string = '';\n  public port: string = '';\n  public insecure: boolean = false;\n  public clusterReferenceId: string = '';\n  private credentialID: string = '';\n  private endpoints: any;\n\n  private $dispatch: any;\n\n  constructor($store: any, obj: any) {\n    if (obj.nutanixcredentialConfig) {\n      Object.keys(obj.nutanixcredentialConfig).forEach((key) => {\n        (this as any)[key] = obj.nutanixcredentialConfig[key];\n      });\n      this.credentialID = obj.id;\n    } else {\n      // Copy from options to this\n      Object.keys(obj).forEach((key) => {\n        (this as any)[key] = obj[key];\n      });\n    }\n\n    this.$dispatch = $store.dispatch;\n  }\n\n  public async testConnection() {\n    const baseUrl = `/meta/proxy/${this.endpoint}:${this.port}`;\n    const url = `${baseUrl}/api/clustermgmt/v4.0/config/clusters`;\n    const headers: any = {\n      Accept: 'application/json'\n    };\n\n    if (this.username === NTNX_API_KEY_HEADER) {\n      headers[NTNX_API_KEY_HEADER] = this.password;\n    } else {\n      headers['X-API-Auth-Header'] = 'Basic ' + btoa(this.username + ':' + this.password);\n    }\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: 'GET',\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      if (res._status === 502) {\n        return { error: 'Could not proxy request - URL may not be in Rancher\\'s allow list' };\n      }\n\n      return res;\n\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n      return { error: e };\n    }\n  }\n\n  public async getClusterList(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: \"/api/clustermgmt/v4.0/config/clusters\",\n      field: 'data',\n      filter: (cluster: any) => cluster.config.hypervisorTypes.includes(\"AHV\"),\n      initial\n    });\n  }\n\n  public async getImages(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/vmm/v4.0/content/images',\n      field: 'data',\n      initial\n    });\n  }\n\n  public async getNetwork(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/networking/v4.0/config/subnets',\n      field: 'data',\n      mapper: async (network: any) => {\n        const vpc = network.subnetType === \"OVERLAY\" ? (await this.getVpc(network.vpcReference)).data : undefined;\n        return {\n          ...network,\n          baseName: network.name,\n          name: network.subnetType === \"OVERLAY\" ? `${network.name} (${vpc.name})` : network.name,\n        }\n      },\n      filter: (network: any) =>\n        (network.subnetType == \"OVERLAY\" ||\n          network.clusterReference == this.clusterReferenceId ||\n          network?.clusterReferenceList.includes(this.clusterReferenceId)) && !network.isExternal,\n      initial\n    });\n  }\n\n  public async getVpc(vpcReference: string) {\n    return await this.makeComputeRequest(`/api/networking/v4.0/config/vpcs/${vpcReference}`);\n  }\n\n  public async getStorageContainer(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/clustermgmt/v4.0/config/storage-containers',\n      field: 'data',\n      filter: (storage: any) => storage.clusterExtId == this.clusterReferenceId,\n      initial\n    });\n  }\n\n  public async getCategories(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/prism/v4.0/config/categories',\n      field: 'data',\n      mapper: (categorie: any) => { return { ...categorie, name: `${categorie.key}=${categorie.value}` } },\n      filter: (categorie: any) => categorie.key !== \"Project\",\n      initial\n    });\n  }\n\n  public async getProjectsName(value: any, initial?: string) {\n    return await this.getOptions({\n      value,\n      api: '/api/nutanix/v3/projects/list',\n      field: 'entities',\n      mapper: (project: any) => { return { ...project, name: `${project.spec.name}` } },\n      initial\n    });\n  }\n\n  // public async getNetworkNames(value: any, initial?: string) {\n  //   return await this.getOptions(value, '/os-tenant-networks', 'networks', (network: any) => {\n  //     return {\n  //       ...network,\n  //       name: network.label\n  //     };\n  //   }, initial);\n  // }\n\n  private async constructTotalResponse(apiPath: string, initialDataLength: number, total: number) {\n    const pageCount = Math.ceil(total / initialDataLength);\n    const data = [];\n    for (let i = 1; i < pageCount; i++) {\n      const nextPageResponse = await this.makeComputeRequest(`${apiPath}?$page=${i}`);\n      data.push(...nextPageResponse.data);\n    }\n\n    return data;\n  }\n\n  private async constructProjectTotalResponse(apiPath: string, initialDataLength: number, total: number) {\n    const pageCount = Math.ceil(total / initialDataLength);\n    const entities = [];\n    for (let i = 1; i < pageCount; i++) {\n      const nextPageResponse = await this.makeComputeRequest(`${apiPath}?$page=${i}`, 'POST');\n      entities.push(...nextPageResponse.entities);\n    }\n\n    return entities;\n  }\n\n  public async getOptions(options: Options) {\n    const { value, api, mapper, filter, initial, field } = options;\n    // We are fetching the data for the options\n    value.busy = true;\n    value.enabled = true;\n    value.selected = isArray(value.selected) ? [] : '';\n\n    let res;\n\n    if (api === '/api/nutanix/v3/projects/list') {\n      res = await this.makeComputeRequest(api, 'POST');\n      const total = res?.metadata?.total_matches ?? 0;\n      const pageCount = res?.entities?.length ?? 0;\n      if (pageCount < total) {\n        const entities = await this.constructProjectTotalResponse(api, pageCount, total);\n        res.entities = [...res.entities, ...entities];\n      }\n    }\n    else {\n      res = await this.makeComputeRequest(api);\n      const total = res?.metadata?.totalAvailableResults ?? 0;\n      const pageCount = res?.data?.length ?? 0;\n\n      if (pageCount < total) {\n        const data = await this.constructTotalResponse(api, pageCount, total);\n        res.data = [...res.data, ...data];\n      }\n    }\n\n    if (res && (res as any)[field]) {\n      let list = (res as any)[field] || [];\n\n      if (filter) {\n        list = list.filter((k: any) => filter(k));\n      }\n\n      if (mapper) {\n        list = await Promise.all(list.map(async (k: any) => await mapper(k)));\n      }\n\n      value.options.forEach((selected: any) => { list.push(selected) });\n\n      value.options = this.convertToOptions(list);\n      value.busy = false;\n\n      if (value.options.length < list.length) {\n        const unique = list.filter((obj: any, index: any) => {\n          return index !== list.findIndex((o: any) => obj.name === o.name);\n        });\n        value.duplicates = unique;\n      }\n\n      if (initial) {\n        const found = value.options.find((option: any) => option.value.name === initial);\n\n        if (found) {\n          value.selected = found.value;\n        }\n      }\n\n    } else {\n      value.options = [];\n      value.selected = isArray(value.selected) ? [] : null;\n      value.busy = false;\n      value.enabled = false;\n    }\n  }\n\n  public async makeComputeRequest(api: string, method: string = 'GET') {\n    const baseUrl = `/meta/proxy/${this.endpoint}:${this.port}`;\n    const url = `${baseUrl}${api}`;\n\n    const headers: any = {\n      Accept: 'application/json',\n      \"Content-Type\": 'application/json'\n    };\n\n    if (this.username === NTNX_API_KEY_HEADER) {\n      headers[NTNX_API_KEY_HEADER] = this.password;\n    } else {\n      headers['X-API-Auth-Header'] = 'Basic ' + btoa(this.username + ':' + this.password);\n    }\n\n    try {\n      const res = await this.$dispatch('management/request', {\n        url,\n        headers,\n        method: method,\n        data: JSON.stringify({}),\n        redirectUnauthorized: false,\n      }, { root: true });\n\n      return res;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n    }\n  }\n\n\n  private convertToOptions(list: any) {\n    const unique = list.filter((obj: any, index: any) => {\n      return index === list.findIndex((o: any) => obj.name === o.name);\n    });\n\n    const sorted = (unique || []).sort((a: any, b: any) => a.name.localeCompare(b.name));\n\n    return sorted.map((p: any) => {\n      return {\n        label: p.name,\n        value: p\n      };\n    });\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".allow-list-error[data-v-61db86b2]{display:flex}.allow-list-error[data-v-61db86b2]>:first-child{flex:1}.icon-spacer[data-v-61db86b2]{width:24px}.align-start[data-v-61db86b2]{align-self:flex-start}\", \"\"]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??clonedRuleSet-23.use[1]!../../../node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[2]!../../../node_modules/postcss-loader/dist/cjs.js??clonedRuleSet-23.use[3]!../../../node_modules/sass-loader/dist/cjs.js??clonedRuleSet-23.use[4]!../../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./nutanix.vue?vue&type=style&index=0&id=61db86b2&lang=scss&scoped=true\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"63d11ad0\", content, true, {\"sourceMap\":false,\"shadowMode\":false});","<script>\nimport { parse as parseUrl } from '@shell/utils/url';\nimport { _CREATE } from '@shell/config/query-params';\nimport { _VIEW } from '@shell/config/query-params';\n\nimport { Nutanix, NTNX_API_KEY_HEADER } from '../nutanix.ts';\n\nimport Banner from '@components/Banner/Banner.vue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Checkbox from '@shell/rancher-components/Form/Checkbox/Checkbox.vue';\n\nexport default {\n  components: {\n    Banner,\n    LabeledInput,\n    LabeledSelect,\n    Checkbox,\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  async fetch() {\n    this.driver = await this.$store.dispatch('rancher/find', {\n      type: 'nodedriver',\n      id:   'nutanix'\n    });\n  },\n\n  mounted() {\n    // Detect auth type from existing credentials\n    if (this.value?.decodedData?.username === NTNX_API_KEY_HEADER) {\n      this.authType = 'apiKey';\n    } else if (this.value?.decodedData?.username) {\n      this.authType = 'password';\n    }\n  },\n\n  data() {\n    return {\n      step:           1,\n      busy:           false,\n      errorAllowHost: false,\n      allowBusy:      false,\n      driver:         {},\n      error:          '',\n      success:        '',\n      authType:       '',\n    };\n  },\n\n  computed: {\n    authTypeOptions() {\n      return [\n        { label: this.t('driver.nutanix.auth.authTypes.password'), value: 'password' },\n        { label: this.t('driver.nutanix.auth.authTypes.apiKey'), value: 'apiKey' },\n      ];\n    },\n\n    hostname() {\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      return u?.host || '';\n    },\n\n    // Function used to verified if we can clic on the Authenticate button\n    canAuthenticate() {\n      if (!this.authType) {\n        return false;\n      }\n      if (this.authType === 'apiKey') {\n        return !!this.value?.decodedData?.endpoint &&\n          !!this.value?.decodedData?.password;\n      }\n      return !!this.value?.decodedData?.endpoint &&\n        !!this.value?.decodedData?.username &&\n        !!this.value?.decodedData?.password;\n    }\n  },\n  emits: ['validationChanged'],\n\n  watch: {\n    authType(newVal) {\n      // Reset test status when auth type changes\n      this.error = '';\n      this.success = '';\n      this.errorAllowHost = false;\n      this.$emit('validationChanged', false);\n      \n      if (newVal === 'apiKey') {\n        this.value.setData('username', NTNX_API_KEY_HEADER);\n        this.value.setData('password', '');\n      } else if (newVal === 'password') {\n        // Clear username when switching back to password mode\n        if (this.value.decodedData.username === NTNX_API_KEY_HEADER) {\n          this.value.setData('username', '');\n          this.value.setData('password', '');\n        }\n      }\n    }\n  },\n\n  methods: {\n\n    test() {\n      return true;\n    },\n\n    hostInAllowList() {\n      if (!this.driver?.whitelistDomains) {\n        return false;\n      }\n\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      if (!u.host) {\n        return true;\n      }\n\n      return (this.driver?.whitelistDomains || []).includes(u.host);\n    },\n\n    async addHostToAllowList() {\n      this['allowBusy'] = true;\n      const u = parseUrl(this.value.decodedData.endpoint);\n\n      this.driver.whitelistDomains = this.driver.whitelistDomains || [];\n\n      if (!this.hostInAllowList()) {\n        this.driver.whitelistDomains.push(u.host);\n      }\n\n      try {\n        await this.driver.save();\n\n        // this.$refs.connect.$el.click();\n\n        this['error'] = \"\";\n        this.connect();\n\n\n      } catch (e) {\n        console.error('Could not update driver', e); // eslint-disable-line no-console\n        this['allowBusy'] = false;\n      }\n\n    },\n\n    async connect() {\n      if (this.disabled) {\n        return;\n      }\n\n      this['error'] = '';\n      this['success'] = '';\n      this['errorAllowHost'] = false;\n\n      let okay = false;\n\n      if (!this.value.decodedData.endpoint) {\n        this['busy'] = false;\n        return;\n      }\n\n      if (!this.value.decodedData.port)\n        this.value.setData('port', 9440);\n\n      const os = new Nutanix(this.$store, {\n        endpoint:   this.value.decodedData.endpoint,\n        username:   this.value.decodedData.username,\n        password:   this.value.decodedData.password,\n        port:       this.value.decodedData.port,\n        insecure:   this.value.decodedData.insecure,\n      });\n\n      this['allowBusy'] = false;\n      this['busy'] = true;\n\n      const res = await os.testConnection();\n\n      if (res.error) {\n        okay = false;\n\n\n        if (res.error._status === 502 && !this.hostInAllowList()) {\n          this['errorAllowHost'] = true;\n        } else if (res.error._status === 401) {\n          this['error'] = \"Authentication Failed\";\n        } else if (res.error._status === 403) {\n          this['error'] = \"Permission Denied\";\n        } else if (res.error._status === 404) {\n          this['error'] = \"API method not found. PC version 2024.3 or higher is required\";\n        } else {\n          this['error'] = res.error.message ? res.error.message : \"Something went wrong\";\n        }\n      } else {\n        okay = true;\n        this['success'] = `Connection to ${this.value.decodedData.endpoint} successful`;\n      }\n\n      this['busy'] = false;\n      this.$emit('validationChanged', okay);\n    }\n  }\n};\n</script>\n\n<template>\n    <div class=\"row\">\n      <div class=\"col span-6\"> <!-- Endpoint -->\n        <LabeledInput\n          :value=\"value.decodedData.endpoint\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.nutanix.auth.fields.endpoint\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.endpoint\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('endpoint', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\"> <!-- Port -->\n        <LabeledInput\n          :value=\"value.decodedData.port\"\n          :disabled=\"step !== 1\"\n          label-key=\"driver.nutanix.auth.fields.port\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.port\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('port', $event);\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row mt-20\">\n      <div class=\"col span-12\">\n        <LabeledSelect\n          :value=\"authType\"\n          :options=\"authTypeOptions\"\n          label-key=\"driver.nutanix.auth.fields.authType\"\n          :mode=\"mode\"\n          :disabled=\"step !== 1\"\n          @update:value=\"authType = $event\"\n        />\n      </div>\n    </div>\n\n    <!-- Password Authentication -->\n    <div v-if=\"authType === 'password'\" class=\"row\">\n      <div class=\"col span-6\"> <!-- Username -->\n        <LabeledInput\n          :value=\"value.decodedData.username\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.nutanix.auth.fields.username\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.username\"\n          type=\"text\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('username', $event);\"\n        />\n      </div>\n      <div class=\"col span-6\"> <!-- Password -->\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.nutanix.auth.fields.password\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.password\"\n          type=\"password\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n\n    <!-- API Key Authentication -->\n    <div v-if=\"authType === 'apiKey'\" class=\"row\">\n      <div class=\"col span-12\"> <!-- API Key -->\n        <LabeledInput\n          :value=\"value.decodedData.password\"\n          :disabled=\"step !== 1\"\n          class=\"mt-20\"\n          label-key=\"driver.nutanix.auth.fields.apiKey\"\n          placeholder-key=\"driver.nutanix.auth.placeholders.apiKey\"\n          type=\"password\"\n          :mode=\"mode\"\n          @update:value=\"value.setData('password', $event);\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col span-6\">\n        <Checkbox\n          class=\"mt-20\"\n          :value=\"value.decodedData.insecure\"\n          :valueWhenTrue=\"true\"\n          label-key=\"driver.nutanix.auth.fields.insecure\"\n          @update:value=\"value.setData('insecure', $event);\"\n          :disabled=\"true\"\n        />\n      </div>\n    </div>\n\n    <!-- Test Authentication -->\n    <button\n      ref=\"connect\"\n      class=\"btn role-primary mt-20 align-start\"\n      :disabled=\"step !== 1 || !canAuthenticate\"\n      :loading=\"step !== 1 || !canAuthenticate\"\n      @click=\"connect($event)\"\n    >\n      <i\n        v-if=\"busy\"\n        class=\"icon icon-lg icon-spinner icon-spin\"\n      />\n      <span\n        v-else\n        class=\"icon-spacer\"\n      />\n      <span>{{ t('driver.nutanix.auth.actions.authenticate') }}</span>\n      <span class=\"icon-spacer\" />\n    </button>\n\n    <Banner v-if=\"success\"\n      color=\"success\"\n      :closable=\"false\"\n    >\n      {{ success }}\n    </Banner>\n\n    <Banner\n      v-if=\"error\"\n      class=\"mt-20\"\n      color=\"error\"\n    >\n      {{ error }}\n    </Banner>\n\n    <Banner\n      v-if=\"errorAllowHost\"\n      color=\"error\"\n      class=\"allow-list-error\"\n    >\n      <div>\n        {{ t('driver.nutanix.auth.errors.notAllowed', { hostname }) }}\n      </div>\n      <button\n        :disabled=\"allowBusy\"\n        class=\"btn ml-10 role-primary\"\n        @click=\"addHostToAllowList\"\n      >\n        {{ t('driver.nutanix.auth.actions.addToAllowList') }}\n      </button>\n    </Banner>\n</template>\n<style lang=\"scss\" scoped>\n  .allow-list-error {\n    display: flex;\n\n    > :first-child {\n      flex: 1;\n    }\n  }\n  .icon-spacer {\n    width: 24px;\n  }\n\n  .align-start {\n    align-self: flex-start;\n  }\n</style>\n","type UriField = 'source' | 'protocol' | 'authority' | 'userInfo' | 'user' | 'password' | 'host' | 'port' | 'relative' | 'path' | 'directory' | 'file' | 'queryStr' | 'anchor'\ntype UriFields = {\n  [key in UriField]: string; // eslint-disable-line no-unused-vars\n}\nexport type QueryParams = {\n  [key: string]: string\n}\n\ninterface ParsedUri extends UriFields {\n  query: QueryParams;\n}\n\nexport function addParam(url: string, key: string, val: string | string[]): string {\n  let out = url + (url.includes('?') ? '&' : '?');\n\n  // val can be a string or an array of strings\n  if ( !Array.isArray(val) ) {\n    val = [val];\n  }\n  out += val.map((v) => {\n    if ( v === null ) {\n      return `${ encodeURIComponent(key) }`;\n    } else {\n      return `${ encodeURIComponent(key) }=${ encodeURIComponent(v) }`;\n    }\n  }).join('&');\n\n  return out;\n}\n\nexport function addParams(url: string, params: QueryParams): string {\n  if ( params && typeof params === 'object' ) {\n    Object.keys(params).forEach((key) => {\n      url = addParam(url, key, params[key]);\n    });\n  }\n\n  return url;\n}\n\nexport function removeParam(url: string, key: string): string {\n  const parsed = parse(url);\n\n  if ( parsed.query?.[key] ) {\n    delete parsed.query[key];\n  }\n\n  return stringify(parsed);\n}\n\nexport function parseLinkHeader(str: string): Record<string, string> {\n  const out: { [key: string]: string} = { };\n  const lines = (str || '').split(',');\n\n  for ( const line of lines ) {\n    const match = line.match(/^\\s*<([^>]+)>\\s*;\\s*rel\\s*=\"(.*)\"/);\n\n    if ( match ) {\n      out[match[2].toLowerCase()] = match[1];\n    }\n  }\n\n  return out;\n}\n\nexport function isMaybeSecure(port: number, proto: string): boolean {\n  const protocol = proto.toLowerCase();\n\n  return portMatch([port], [443, 8443], ['443']) || protocol === 'https';\n}\n\nexport function portMatch(ports: number[], equals: number[], endsWith: string[]): boolean {\n  for (let i = 0; i < ports.length; i++) {\n    const port = ports[i];\n\n    if (equals.includes(port)) {\n      return true;\n    }\n\n    for (let j = 0; j < endsWith.length; j++) {\n      const suffix = `${ endsWith[j] }`;\n      const portStr = `${ port }`;\n\n      if (portStr !== suffix && portStr.endsWith(suffix)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\n// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// https://javascriptsource.com/parseuri/\n// MIT License\nexport function parse(str: string): ParsedUri {\n  const o = parse.options;\n  const m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str);\n\n  if (!m) {\n    throw new Error(`Cannot parse as uri: ${ str }`);\n  }\n  const uri = {} as ParsedUri;\n  let i = 14;\n\n  while (i--) {\n    uri[o.key[i]] = m[i] || '';\n  }\n\n  uri.query = {};\n  uri.queryStr.replace(o.q.parser, (_, $1: string, $2: string): string => {\n    if ($1) {\n      uri[o.q.name][$1] = $2;\n    }\n\n    return '';\n  });\n\n  return uri;\n}\n\nparse.options = {\n  strictMode: false,\n  key:        ['source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'queryStr', 'anchor'],\n  q:          {\n    name:   'query',\n    parser: /(?:^|&)([^&=]*)=?([^&]*)/g\n  },\n  parser: {\n    strict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n    loose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  }\n} as {\n  strictMode: boolean,\n  key: UriField[],\n  q: {\n    name: 'query',\n    parser: RegExp\n  },\n  parser: {\n    strict: RegExp,\n    loose: RegExp\n  }\n};\n\nexport function stringify(uri: ParsedUri): string {\n  let out = `${ uri.protocol }://`;\n\n  if ( uri.user && uri.password ) {\n    out += `${ uri.user }:${ uri.password }@`;\n  } else if ( uri.user ) {\n    out += `${ uri.user }@`;\n  }\n\n  out += uri.host;\n\n  if ( uri.port ) {\n    out += `:${ uri.port }`;\n  }\n\n  out += uri.path || '/';\n\n  out = addParams(out, uri.query || {});\n\n  if ( uri.anchor ) {\n    out += `#${ uri.anchor }`;\n  }\n\n  return out;\n}\n","import { render } from \"./nutanix.vue?vue&type=template&id=61db86b2&scoped=true\"\nimport script from \"./nutanix.vue?vue&type=script&lang=js\"\nexport * from \"./nutanix.vue?vue&type=script&lang=js\"\n\nimport \"./nutanix.vue?vue&type=style&index=0&id=61db86b2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-61db86b2\"]])\n\nexport default __exports__"],"names":["NTNX_API_KEY_HEADER","Nutanix","constructor","$store","obj","_defineProperty","nutanixcredentialConfig","Object","keys","forEach","key","this","credentialID","id","$dispatch","dispatch","testConnection","baseUrl","endpoint","port","url","headers","Accept","username","password","btoa","res","method","redirectUnauthorized","root","_status","error","e","console","getClusterList","value","initial","getOptions","api","field","filter","cluster","config","hypervisorTypes","includes","getImages","getNetwork","mapper","async","vpc","network","subnetType","getVpc","vpcReference","data","undefined","baseName","name","clusterReference","clusterReferenceId","clusterReferenceList","isExternal","makeComputeRequest","getStorageContainer","storage","clusterExtId","getCategories","categorie","getProjectsName","project","spec","constructTotalResponse","apiPath","initialDataLength","total","pageCount","Math","ceil","i","nextPageResponse","push","constructProjectTotalResponse","entities","options","busy","enabled","selected","isArray","metadata","total_matches","length","totalAvailableResults","list","k","Promise","all","map","convertToOptions","unique","index","findIndex","o","duplicates","found","find","option","JSON","stringify","sorted","sort","a","b","localeCompare","p","label","___CSS_LOADER_EXPORT___","module","content","__esModule","default","locals","exports","add","class","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_LabeledInput","$props","decodedData","disabled","$data","step","type","mode","_cache","$event","setData","_hoisted_3","_hoisted_4","_hoisted_5","_component_LabeledSelect","authType","$options","authTypeOptions","_createElementBlock","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_component_Checkbox","insecure","valueWhenTrue","ref","canAuthenticate","loading","onClick","connect","_hoisted_14","_hoisted_15","_toDisplayString","_ctx","t","success","_createBlock","_component_Banner","color","closable","errorAllowHost","hostname","allowBusy","args","addHostToAllowList","_hoisted_16","parse","str","m","parser","strictMode","exec","Error","uri","query","queryStr","replace","q","_","$1","$2","strict","loose","components","Banner","LabeledInput","LabeledSelect","Checkbox","props","String","required","fetch","driver","mounted","computed","u","parseUrl","host","emits","watch","newVal","$emit","methods","test","hostInAllowList","whitelistDomains","save","okay","os","message","__exports__","render"],"sourceRoot":""}